
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>登录</title>
    <link rel="stylesheet" href="assets/css/reset.min.css">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_549128_1mazwd5ifqv0lik9.css">
    <link rel="stylesheet" href="assets/css/login.css">
    <link rel="stylesheet" href="assets/css/register.css">
    <link rel="stylesheet" href="assets/js/alert/window.css">
    <script type="text/javascript" src="assets/js/jquery-2.2.4.js"></script>
    <script type="text/javascript" src="assets/js/bootstrap.js"></script>
    <script type="text/javascript" src="assets/js/tools.js"></script>
    <script type="text/javascript" src="assets/js/alert/window.js"></script>
    <script type="text/javascript" src="assets/js/localStorageUtils.js"></script>
</head>
<body>
<div class="logo">
    <img src="assets/images/logo.png" alt="">
</div>
<div class="register" style="border-radius:10px">
    <div class="register_header" style="font-weight:bold">
        <span class="left" style="color:#fff">管理员</span>
        <span class="user" style="color:#416496" id="admin">普通用户</span>
    </div>
    <div class="register_footer">
        <div class="container">
            <div class="row">
                <div class="form-group">
                    <label class="col-md-1 control-label" for="ipt">单 位&nbsp:</label>
                    <div class="col-md-2">
                        <div class="input-group">
                            <input class="form-control" id="ipt" type="text"/>
                            <div class="input-group-btn">
                                <button type="button" class="btn btn-default " data-toggle="dropdown"
                                        aria-haspopup="true" aria-expanded="false"
                                        style="background:#16578d;padding:6px 14px;border-radius:3px"><span
                                        class="caret" style="color:#fff;"></span></button>
                                <ul class="dropdown-menu" id="unit">
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="form-group">
                    <label class="col-md-1 control-label" for="show_pass">密 码&nbsp:</label>
                    <div class="col-md-2">
                        <div class="input-group">
                            <input class="form-control" id="show_pass" type="text"/>
                            <div class="input-group-btn">
                                <button type="button" class="btn btn-default " style="padding:6px 7px;"
                                        aria-haspopup="true"><span
                                        class="iconfont icon-yanjing" style="color:#16578d;font-size:12px"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <div class="remember clearfix" style="padding:8px 73px 8px 164px;
    color:#fff;">
        <div class="rem_left" style="float:left">
            <input type="checkbox">
            <span>记住密码</span>
        </div>
        <span style="float:right;margin-top:2px;" id="register">注册账户</span>
    </div>
    <div style="margin-top:40px;">
        <button type="button" class="btn btn-default" style="display:inline-block;
    width:300px;
    color:#295290;
    border-radius:18px;font-weight:bold" id="entry">登录
        </button>
    </div>
</div>
</div>
<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--<meta charset="UTF-8">-->
<!--<title>登录</title>-->
<!--<meta name="viewport"-->
<!--content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">-->
<!--<link rel="stylesheet" href="assets/css/reset.min.css">-->
<!--<link rel="stylesheet" href="assets/css/bootstrap.min.css">-->
<!--<link rel="stylesheet" href="assets/css/login.css">-->
<!--<link rel="stylesheet" href="assets/js/alert/window.css">-->
<!--<script type="text/javascript" src="assets/js/jquery-2.2.4.js"></script>-->
<!--<script type="text/javascript" src="assets/js/bootstrap.js"></script>-->
<!--<script type="text/javascript" src="assets/js/tools.js"></script>-->
<!--<script type="text/javascript" src="assets/js/alert/window.js"></script>-->
<!--<script type="text/javascript" src="assets/js/localStorageUtils.js"></script>-->
<!--</head>-->
<!--<body>-->
<!--<div class="logo">-->
<!--<img src="assets/images/logo.png" alt="">-->
<!--</div>-->
<!--<div class="login">-->
<!--<div class="manager">-->
<!--<span class="left default">管理员</span>-->
<!--<span class="right" id="genera">普通用户</span>-->
<!--</div>-->
<!--<div class="content">-->
<!--<div class="row">-->
<!--<form class="form-horizontal" name="">-->
<!--<div class="form-group">-->
<!--<label class="col-md-3 control-label" style="font-size:16px;font-weight: normal">单 位:</label>-->
<!--&lt;!&ndash;<div class="col-md-4">&ndash;&gt;-->
<!--&lt;!&ndash;<div class="input-group">&ndash;&gt;-->
<!--&lt;!&ndash;<input type="text" class="form-control">&ndash;&gt;-->
<!--&lt;!&ndash;<div class="input-group-btn">&ndash;&gt;-->
<!--&lt;!&ndash;<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"&ndash;&gt;-->
<!--&lt;!&ndash;aria-haspopup="true" aria-expanded="false" style="background:#16578d"><span class="caret" style="color:#fff"></span></button>&ndash;&gt;-->
<!--&lt;!&ndash;<ul class="dropdown-menu">&ndash;&gt;-->
<!--&lt;!&ndash;</ul>&ndash;&gt;-->
<!--&lt;!&ndash;</div>&ndash;&gt;-->
<!--&lt;!&ndash;</div>&ndash;&gt;-->
<!--&lt;!&ndash;</div>&ndash;&gt;-->
<!--<div class="col-md-8">-->
<!--<div class="input-group">-->
<!--<input type="text" class="form-control" id="ipt" value="">-->
<!--<div class="input-group-btn">-->
<!--<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"-->
<!--aria-haspopup="true" aria-expanded="false" style="background:#16578d"><span-->
<!--class="caret" style="color:#fff"></span></button>-->
<!--<ul class="dropdown-menu" id="unit">-->
<!--&lt;!&ndash;<li><a href="#">Action</a></li>&ndash;&gt;-->
<!--&lt;!&ndash;<li><a href="#">Another action</a></li>&ndash;&gt;-->
<!--&lt;!&ndash;<li><a href="#">Something else here</a></li>&ndash;&gt;-->
<!--&lt;!&ndash;<li role="separator" class="divider"></li>&ndash;&gt;-->
<!--&lt;!&ndash;<li><a href="#">Separated link</a></li>&ndash;&gt;-->
<!--</ul>-->
<!--</div>-->
<!--</div>-->
<!--</div>-->
<!--</div>-->
<!--<div class="from-group">-->
<!--<label class="col-md-3 control-label" style="font-size:16px;font-weight: normal">密 码:</label>-->
<!--<div class="col-md-8">-->
<!--<div class="input-group">-->
<!--<input type="text" class="form-control" id="show_pass" value="">-->
<!--<div class="input-group-btn">-->
<!--<button type="button" class="btn btn-default " style="padding:3px 7px;"-->
<!--aria-haspopup="true"><span-->
<!--class="glyphicon glyphicon-eye-open" style="color:#16578d"></span></button>-->
<!--</div>-->
<!--</div>-->
<!--</div>-->
<!--</div>-->
<!--</form>-->
<!--</div>-->
<!--<div class="remember clearfix">-->
<!--<div class="rem_left" style="float:left">-->
<!--<input type="checkbox">-->
<!--<span>记住密码</span>-->
<!--</div>-->
<!--<span style="float:right" id="register">注册账户</span>-->
<!--</div>-->
<!--</div>-->
<!--<div class="footer">-->
<!--<span id="login">登录</span>-->
<!--</div>-->
<!--</div>-->
<!--</div>-->

<script>
    getunit();
    function getunit() {
        $.ajax({
            url: "/getAllUnit",
            type: "post",
            dataType: "json",
            async: false,
            data: null,
            timeOut: 10000,
            success: function (data) {
                console.log(data);
                if (data.code == 0) {
                    var result = data.row;
                    var $unit = $("#unit");
                    for (var i = 0; i < result.length; i++) {
                        var num = result[i];
                        $unit.append($("<li></li>").append($("<a></a>").append((num.name))));
                    }
                } else {
                    win.alert("提示", data.msg);
                }
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                console.log(XMLHttpRequest);
                console.log(textStatus);
                console.log(errorThrown);
            }
        })
    }

    var $as = $("#unit a"), $input = $("#ipt");
    $as.click(function () {
        $this = $(this);
        $input.attr("placeholder", $this.html());
        $input.val($this.html())

    })


    $("#entry").click(function () {
        var data = {};
        data.role_id = 2;
        data.name = $("#ipt").val();
        data.show_pass = $("#show_pass").val();
        data = JSON.stringify(data);
        $.ajax({
            url: "/userLogin",
            type: "post",
            dataType: "json",
            async: false,
            headers: {'Content-Type': 'application/json'},
            data: data,
            timeOut: 10000,
            success: function (data) {
                if (data.code == 0) {
                    win.alert('提示', data.msg, function () {
                        saveData('USER_KEY', data.row[0]);
                        window.location.href = "shouye.html";
                    });
                } else {
                    win.alert('提示', data.msg);
                }
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                console.log(XMLHttpRequest);
                console.log(textStatus);
                console.log(errorThrown);
            }
        })
    });

    $("#register").click(function () {
        window.location.href = "register.html";
    });
    $("#admin").click(function () {
        window.location.href = 'putongLogin.html';
    })

</script>
</body>
</html>